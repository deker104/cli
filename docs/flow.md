# **Потоки данных и взаимодействие компонентов**  

## 1. Ввод и разбор команды  

1. `REPL` получает строку ввода.  
2. `Substitutor` заменяет переменные окружения.  
3. `Parser` разбирает строку:  
   - Токенизирует команду.  
   - Учитывает кавычки и экранирование.  
   - Формирует структуру команды.  

Пример:  

```bash
echo "Привет, $USER"
```

Обрабатывается как:  
- **Команда**: `echo`  
- **Аргумент**: `"Привет, user_name"`  

---

## 2. Исполнение команды  

1. **Определение типа команды**  
   - Встроенные команды (`pwd`, `exit`) обрабатываются внутри `Executor`.  
   - Внешние (`git`) передаются в `os/exec`.  

2. **Обработка пайпов**  
   - `Pipes` создаёт пайплайн и связывает `stdout` одной команды с `stdin` следующей.  

Пример пайплайна:  

```bash
cat file.txt | wc -l
```

1. `cat file.txt` отправляет данные в `stdout`.  
2. `wc -l` получает их через `stdin`.  

---

## 3. Вывод результата  

- Если команда последняя, её `stdout` выводится в консоль.  
- Если команда используется в пайплайне, `stdout` передаётся следующей команде.  
- `Executor` возвращает `Result(output, exit_code)`.  

---

## 4. Завершение работы  

- `exit` завершает `REPL`.  
- Коды возврата команд (`$?`) сохраняются в `Result.exit_code`.  

---

